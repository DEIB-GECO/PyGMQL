#!/bin/bash

aws emr create-cluster --applications Name=Hadoop Name=Spark Name=Livy Name=JupyterHub --ec2-attributes '{"KeyName":"nanni","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-16b2175a","EmrManagedSlaveSecurityGroup":"sg-09692ac52f1f3be66","EmrManagedMasterSecurityGroup":"sg-0694e1fbb35963690"}' --release-label emr-5.19.0 --log-uri 's3n://aws-logs-016327901958-us-east-2/elasticmapreduce/' --steps '[{"Args":["s3-dist-cp","--src=s3://tica-test-datasets/unzip/HG19_BED_ANNOTATION","--dest=hdfs:///HG19_BED_ANNOTATION"],"Type":"CUSTOM_JAR","ActionOnFailure":"CANCEL_AND_WAIT","Jar":"command-runner.jar","Properties":"","Name":"Copy HG19_BED_ANNOTATION"},{"Args":["s3-dist-cp","--src=s3://pygmql-experiments/GWAS_Noam","--dest=hdfs:///GWAS_Noam"],"Type":"CUSTOM_JAR","ActionOnFailure":"CANCEL_AND_WAIT","Jar":"command-runner.jar","Properties":"","Name":"Copy GWAS_Noam"},{"Args":["s3-dist-cp","--src=s3://tica-test-datasets/unzip/HG19_ENCODE_BROAD","--dest=hdfs:///HG19_ENCODE_BROAD"],"Type":"CUSTOM_JAR","ActionOnFailure":"CANCEL_AND_WAIT","Jar":"command-runner.jar","Properties":"","Name":"Copy HG19_ENCODE_BROAD"}]' --instance-groups '[{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":100,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"MASTER","InstanceType":"m5.2xlarge","Name":"Master - 1"},{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":100,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"CORE","InstanceType":"m5.2xlarge","Name":"Core (principale) - 2"}]' --auto-scaling-role EMR_AutoScaling_DefaultRole --bootstrap-actions '[{"Path":"s3://geco-utilities/startup.sh","Name":"Setup"}]' --ebs-root-volume-size 10 --service-role EMR_DefaultRole --enable-debugging --name '1 master - 1 slave (m5.2xlarge)' --scale-down-behavior TERMINATE_AT_TASK_COMPLETION --region us-east-2